
@{
    ViewBag.Title = "SingleDetailView";
    Layout = "~/Views/Shared/_MyLayoutPage.cshtml";
}
@section head{
    <link rel="stylesheet" href="~/Content/WeChat.css?a=@DateTime.Now.ToShortTimeString()" />
    <script src="~/Scripts/echarts.common.min.js"></script>
}

<div style="position:relative;width:100%;">
    <div style="margin:0 auto;width:46px;float:left;"><img style="width:46px;height:46px;" src="~/Content/logo.png" /></div>
    <div style="float:left;width:120px;line-height:46px;text-align:center">X用X户X名X</div>
    <div class="weui-search-bar" style="float:left;width:35%;">
        @* 这里的action是直接到控制器的 *@
        <div class="weui-search-bar__box" style="height:30px;text-align:center;background-color:white;" onclick="ShowSearch()">
            <label style="text-align:center;"><span class="weui-icon-search"></span>搜索</label>
        </div>
    </div>
    <div style="position:absolute;right:0;height:46px;width:40px;text-align:center;line-height:46px;background-color:aquamarine;" onclick="GoBack()">
        返回
    </div>
</div>
<script type="text/javascript">
    function ShowSearch() {
        $("#SearchPad").css("display", "block");
        $(".weui-search-bar").css("display", "none");
    }

    function GoBack() {
        window.location.href = "/MainPage/MainStateView";
    }

    function cancelSearch() {
        $("#SearchPad").css("display", "none");
        $(".weui-search-bar").css("display", "block");
    }

    function Search() {
        $("#SearchPad").css("display", "none");
        $(".weui-search-bar").css("display", "block");
    }
</script>

<div id="SearchPad" style="display:none;position:absolute;height:100%;width:100%;background-color:white;z-index:5;">
    <div style="height:40px;float:left;width:20%;background-color:cornflowerblue;">
        <p style="text-align:center;font-size:16px;line-height:40px;" onclick="cancelSearch()">返回</p>
    </div>
    <div style="height:40px;float:left;width:60%;">
        <p style="text-align:center;font-size:16px;line-height:40px;">搜索选项列表</p>
    </div>
    <div style="height:40px;float:left;width:20%;background-color:cornflowerblue;">
        <p style="text-align:center;font-size:16px;line-height:40px;" onclick="Search()">确定</p>
    </div>
    <div class="weui-cells__title" style="clear:both;">吨位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="number" placeholder="请输入吨位，默认为全部">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">效率区间值（默认为全部）</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <input class="weui-input" type="number" placeholder="最小值">
            </div>
            <div class="weui-cell__hd">
                <input class="weui-input" type="number" placeholder="最大值">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">时间区间选择</div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">起始时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timestart" type="text" value="2017-01-01 12:00">
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">结束时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timeend" type="text" value="2017-01-01 12:00">
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">区域</div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">区域选择</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="SearchLocat" type="text" readonly placeholder="默认为全部" value="重庆市" onclick="SearchLocatFunc()">
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">制造单位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="默认为全部">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">使用单位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="默认为全部">
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $("#timestart").datetimePicker({
        title: '起始时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });
    $("#timeend").datetimePicker({
        title: '结束时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });



    function SearchLocatFunc() {
        $.actions({
            title: "选择区域",
            onClose: function () {
                console.log("close");
            },
            actions: [
                {
                    text: "重庆市",
                    className: "color-primary",
                    onClick: function () {
                        //选择后的事情
                        $("#SearchLocat").val("重庆市");
                    }
                },
                {
                    text: "江北区",
                    className: "color-primary",
                    onClick: function () {
                        $("#SearchLocat").val("江北区");
                    }
                },
                {
                    text: "渝中区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("渝中区");
                    }
                },
                {
                    text: "沙坪坝区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("沙坪坝区");
                    }
                },
                {
                    text: "渝北",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("渝北");
                    }
                },
                {
                    text: "九龙坡区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("九龙坡区");
                    }
                },
                {
                    text: "北碚区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("北碚区");
                    }
                }

            ]
        });
    }
</script>
<div style="height:60px;"></div>



<h2 style="text-align:center;width:100%;">设备名称</h2>
<div class="weui-cells">
    <div class="weui-cell">
        <div class="weui-cell__hd" style="width:50%;">
            <p style="width:auto;">型号:<span>xxxx</span></p>
        </div>
        <div class="weui-cell__hd" style="width:50%;">
            <p style="width:auto;">编号:<span>xxxx</span></p>
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd" style="width:50%;">
            <p style="width:auto;">状态:<span>xxxx</span></p>
        </div>
        <div class="weui-cell__hd" style="width:50%;">
            <p style="width:auto;">地址:<span>xxxx</span></p>
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd" style="width:50%;text-align:center;background-color:antiquewhite;" onclick="getErrChart()">
            <p style="width:auto;">故障图表</p>
        </div>
        <div class="weui-cell__hd" style="width:50%;text-align:center;background-color:aqua;" onclick="getEffiChart()">
            <p style="width:auto;">效率图表</p>
        </div>
    </div>

    <div style="width:100%;height:400px;" id="main1"></div>
    <div style="width:100%;height:400px;" id="main2"></div>

    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">起始时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timestart" type="text" value="2017-01-01 12:00">
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">结束时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timeend" type="text" value="2017-01-01 12:00">
        </div>
    </div>
</div>

<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart1 = echarts.init(document.getElementById('main1'));
        var myChart2 = echarts.init(document.getElementById("main2"));
        option1 = {
            title: {
                text: '排烟温度',
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['排烟温度']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '0%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['11:10', '11:20', '11:30', '11:40', '11:50', '11:60', '11:70']
            },
            yAxis: {
                type: 'value',
                axisLabel: {
                    formatter: '{value} °C'
                }
            },
            series: [
                {
                    name: '排烟温度',
                    type: 'line',
                    data: [80, 90, 120, 80, 70, 90, 80],
                    markPoint: {
                        data: [
                            { type: 'max', name: '高' },
                            { type: 'min', name: '低' }
                        ]
                    },
                    markLine: {
                        data: [
                            { type: 'average', name: '平均值' }
                        ]
                    }
                }
            ]
        };

        option2 = {
            title: {
                text: '效率',
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['效率']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '0%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['11:10', '11:20', '11:30', '11:40', '11:50', '11:60', '11:70']
            },
            yAxis: {
                type: 'value',
                axisLabel: {
                    formatter: '{value} %'
                }
            },
            series: [
                {
                    name: '效率',
                    type: 'line',
                    data: [60, 65, 68, 65, 70, 65, 63],
                    //markPoint: {
                    //    data: [
                    //        { name: '问题', value: '问题', xAxis: 3, yAxis: 6 }
                    //    ]
                    //},
                    markLine: {
                        data: [
                            { type: 'average', name: '平均值' },
                            [{
                                symbol: 'none',
                                x: '90%',
                                yAxis: 'max'
                            }, {
                                symbol: 'circle',
                                label: {
                                    normal: {
                                        position: 'start',
                                        formatter: '最大值'
                                    }
                                },
                                type: 'max',
                                name: '最高点'
                            }]
                        ]
                    }
                }
            ]
        };

        option3 = {
            title: {
                text: '压力',
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['压力']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '0%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['11:10', '11:20', '11:30', '11:40', '11:50', '11:60', '11:70']
            },
            yAxis: {
                type: 'value',
                axisLabel: {
                    formatter: '{value} KPa'
                }
            },
            series: [
                {
                    name: '压力',
                    type: 'line',
                    data: [20, 25, 30, 35, 40, 30, 35],
                    //markPoint: {
                    //    data: [
                    //        { name: '问题', value: '问题', xAxis: 3, yAxis: 6 }
                    //    ]
                    //},
                    markLine: {
                        data: [
                            { type: 'average', name: '平均值' },
                            [{
                                symbol: 'none',
                                x: '90%',
                                yAxis: 'max'
                            }, {
                                symbol: 'circle',
                                label: {
                                    normal: {
                                        position: 'start',
                                        formatter: '最大值'
                                    }
                                },
                                type: 'max',
                                name: '最高点'
                            }]
                        ]
                    }
                }
            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        if ("@ViewBag.ChartType"=="Efficiency") {
            getEffiChart();
        } else {
            getErrChart();
        }
        //myChart1.setOption(option1, true);
        //myChart2.setOption(option3, true);

        function getErrChart() {

            $("#main2").css("display", "block");
            myChart1.setOption(option1, true);
            myChart2.setOption(option3, true);
        }

        function getEffiChart() {
            $("#main2").css("display", "none");
            myChart1.setOption(option2, true);
        }
</script>







<div style="position:relative;background-image:url(/Content/Images/boiler.png);background-size:100% 100%;width:100%;height:300px;">
    <div style="position:absolute;top:10px;left:10px;width:auto;height:30px;">
        <p style="font-weight:bolder;">Tpy:<span>5</span>℃</p>
    </div>
    <div style="position:absolute;bottom:10px;left:10px;width:auto;height:30px;">
        <p style="font-weight:bolder;">一氧化碳CO:<span>0.1</span>%</p>
    </div>
    <div style="position:absolute;top:20px;right:10px;width:auto;height:30px;">
        <p style="font-weight:bolder;">氧气O<span style="font-size:0.5em;">2</span>:<span>20</span>%</p>
    </div>

    <div style="position:absolute;top:60px;right:10px;width:auto;height:30px;background-color:rgba(255,255,255,0.6);">
        <p style="font-weight:bolder;">冷空气温度T<span style="font-size:0.5em;">lk</span>:<span>10</span>℃</p>
    </div>

    <div style="position:absolute;top:100px;right:10px;width:auto;height:30px;background-color:rgba(255,255,255,0.2);">
        <p style="font-weight:bolder;color:crimson">表面温度T<span style="font-size:0.5em;">bm</span>:<span>19</span>℃</p>
    </div>
    <div style="position:absolute;top:140px;right:10px;width:auto;height:30px;background-color:rgba(255,255,255,0.2);">
        <p style="font-weight:bolder;">蒸汽压力P<span style="font-size:0.5em;"></span>:<span>20</span>KPa</p>
    </div>
</div>


<script type="text/javascript">
    $("#timestart").datetimePicker({
        title: '起始时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });
    $("#timeend").datetimePicker({
        title: '结束时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });
</script>



<div style="clear:both;height:50px;width:100%;"></div>
<div style="position:fixed;width:100%;bottom:0px;height:50px;background-color:white;">
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoMainStateView()">首页</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoEfficiencyView()">能效</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoSafeStateView()">安全</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoMapView()">地图</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoSettingView()">设置</span></div>
</div>
<script type="text/javascript">

    function GoMainStateView() {
        window.location.href = "/MainPage/MainStateView";
    }

    function GoEfficiencyView() {
        window.location.href = "/MainPage/EfficiencyView";
    }

    function GoSafeStateView() {
        window.location.href = "/MainPage/SafeStateView";
    }

    function GoMapView() {
        window.location.href = "/MainPage/MapView";
    }

    function GoSettingView() {
        window.location.href = "/MainPage/SettingView";
    }
</script>


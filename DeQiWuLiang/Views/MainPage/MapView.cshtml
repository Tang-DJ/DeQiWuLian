
@{
    ViewBag.Title = "地图选择";
    Layout = "~/Views/Shared/_MyLayoutPage.cshtml";
    
}
@section head{
    <link rel="stylesheet" href="~/Content/WeChat.css?a=@DateTime.Now.ToShortTimeString()" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=kSoIGIUPtwLnFbxKLyZfxKYa77SQpoXO"></script>
}

<div style="position:relative;width:100%;">
    <div style="margin:0 auto;width:46px;float:left;"><img style="width:46px;height:46px;" src="~/Content/logo.png" /></div>
    <div style="float:left;width:120px;line-height:46px;text-align:center">X用X户X名X</div>
    <div class="weui-search-bar" style="float:left;width:35%;">
        @* 这里的action是直接到控制器的 *@
        <div class="weui-search-bar__box" style="height:30px;text-align:center;background-color:white;" onclick="ShowSearch()">
            <label style="text-align:center;"><span class="weui-icon-search"></span>搜索</label>
        </div>
    </div>
    <div style="position:absolute;right:0;height:46px;width:40px;text-align:center;line-height:46px;background-color:aquamarine;" onclick="GoBack()">
        返回
    </div>
</div>
<script type="text/javascript">

    function ShowSearch() {
        $("#SearchPad").css("display", "block");
        $(".weui-search-bar").css("display", "none");
    }

    function GoBack() {
        window.location.href = "/MainPage/MainStateView";
    }

    function cancelSearch() {
        $("#SearchPad").css("display", "none");
        $(".weui-search-bar").css("display", "block");
    }

    function Search() {
        $("#SearchPad").css("display", "none");
        $(".weui-search-bar").css("display", "block");
    }
</script>

<div id="SearchPad" style="display:none;position:absolute;height:100%;width:100%;background-color:white;z-index:5;">
    <div style="height:40px;float:left;width:20%;background-color:cornflowerblue;">
        <p style="text-align:center;font-size:16px;line-height:40px;" onclick="cancelSearch()">返回</p>
    </div>
    <div style="height:40px;float:left;width:60%;">
        <p style="text-align:center;font-size:16px;line-height:40px;">搜索选项列表</p>
    </div>
    <div style="height:40px;float:left;width:20%;background-color:cornflowerblue;">
        <p style="text-align:center;font-size:16px;line-height:40px;" onclick="Search()">确定</p>
    </div>
    <div class="weui-cells__title" style="clear:both;">吨位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="number" placeholder="请输入吨位，默认为全部">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">效率区间值（默认为全部）</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <input class="weui-input" type="number" placeholder="最小值">
            </div>
            <div class="weui-cell__hd">
                <input class="weui-input" type="number" placeholder="最大值">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">时间区间选择</div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">起始时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timestart" type="text" value="2017-01-01 12:00">
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">结束时间</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="timeend" type="text" value="2017-01-01 12:00">
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">区域</div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="time-format" class="weui-label">区域选择</label></div>
        <div class="weui-cell__bd">
            <input class="weui-input" id="SearchLocat" type="text" readonly placeholder="默认为全部" value="重庆市" onclick="SearchLocatFunc()">
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">制造单位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="默认为全部">
            </div>
        </div>
    </div>
    <div class="weui-cells__title" style="clear:both;">使用单位</div>
    <div class="weui-cells">
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="默认为全部">
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $("#timestart").datetimePicker({
        title: '起始时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });
    $("#timeend").datetimePicker({
        title: '结束时间',
        years: [2017, 2018, 2019],
        //monthes: ['06', '07'],
        onChange: function (picker, values, displayValues) {
            console.log(values);
        }
    });



    function SearchLocatFunc() {
        $.actions({
            title: "选择区域",
            onClose: function () {
                console.log("close");
            },
            actions: [
                {
                    text: "重庆市",
                    className: "color-primary",
                    onClick: function () {
                        //选择后的事情
                        $("#SearchLocat").val("重庆市");
                    }
                },
                {
                    text: "江北区",
                    className: "color-primary",
                    onClick: function () {
                        $("#SearchLocat").val("江北区");
                    }
                },
                {
                    text: "渝中区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("渝中区");
                    }
                },
                {
                    text: "沙坪坝区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("沙坪坝区");
                    }
                },
                {
                    text: "渝北",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("渝北");
                    }
                },
                {
                    text: "九龙坡区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("九龙坡区");
                    }
                },
                {
                    text: "北碚区",
                    className: 'color-primary',
                    onClick: function () {
                        $("#SearchLocat").val("北碚区");
                    }
                }

            ]
        });
    }
</script>








<div style="height:90%;width:100%;position:absolute;top:50px;" id="allmap"></div>


<script type="text/javascript">
    $(document).ready(function () {
        
        var screenHeight = document.documentElement.clientHeight;
        var screenWidth = document.documentElement.clientWidth;
        var body = document.getElementById('body');
        body.style.width = screenWidth + "px";
        body.style.height = screenHeight + "px";


    });
    

    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(106.5233, 29.624099);
    map.centerAndZoom(point, 13);
    map.enableScrollWheelZoom();


    var marker = new BMap.Marker(point);  // 创建标注
    var label = new BMap.Label("3台锅炉运行", { offset: new BMap.Size(-20, -20) });
    marker.setLabel(label);
    map.addOverlay(marker);              // 将标注添加到地图中
    marker.addEventListener("click", getDetail);

    point = new BMap.Point(106.5474, 29.624099);
    marker = new BMap.Marker(point);  // 创建标注
    label = new BMap.Label("5台锅炉运行", { offset: new BMap.Size(-20, -20) });
    marker.setLabel(label);
    map.addOverlay(marker);  
    marker.addEventListener("click", getDetail);

    function getDetail() {
        window.location.href = "/MainPage/DeviceListView";
    }
    function StateView() {
        window.location.href = "/MainPage/MainStateView";
    }

</script>

@*<div style="clear:both;height:50px;width:100%;"></div>*@
<div style="position:fixed;width:100%;bottom:0px;height:50px;background-color:white;">
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoMainStateView()">首页</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoEfficiencyView()">能效</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoSafeStateView()">安全</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoMapView()">地图</span></div>
    <div style="float:left;width:20%;text-align:center;"><span style="line-height:50px;" onclick="GoSettingView()">设置</span></div>
</div>
<script type="text/javascript">

    function GoMainStateView() {
        window.location.href = "/MainPage/MainStateView";
    }

    function GoEfficiencyView() {
        window.location.href = "/MainPage/EfficiencyView";
    }

    function GoSafeStateView() {
        window.location.href = "/MainPage/SafeStateView";
    }

    function GoMapView() {
        window.location.href = "/MainPage/MapView";
    }

    function GoSettingView() {
        window.location.href = "/MainPage/SettingView";
    }




</script>